<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE devices PUBLIC "-//YARP//DTD yarprobotinterface 3.0//EN" "http://www.yarp.it/DTD/yarprobotinterfaceV3.0.dtd">

<devices>
    <device type="xsensmt" name="imu-inertial">
        <param name="serial">  /dev/ttyS0   </param>
        <param name="xsensmt_period">0.01</param>
        <param name="xsensmt_euler_period">0.005</param>
        <param name="xsensmt_gyro_period">0.005</param>
        <param name="xsensmt_acc_period">0.005</param>
        <param name="xsensmt_mag_period">0.01</param>
        <param name="sensor_name">waist_imu_0</param>
    </device>

    <device xmlns:xi="http://www.w3.org/2001/XInclude" name="imu-inertial_wrapper" type="multipleanalogsensorsserver">
        <param name="period">       5                  </param>
        <param name="name">  /imu/inertials  </param>
        <action phase="startup" level="5" type="attach">
            <paramlist name="networks">
                <!-- The name of the element can be any string (we use SetOfIMUs to better express its nature).
                     Its value must match the device name in the corresponding body_part-jx_y-inertials.xml file
                     or in body_part-ebX-inertials.xml -->
                <elem name="SetOfIMUs"> imu-inertial </elem>
            </paramlist>
        </action>
        <action phase="shutdown" level="5" type="detach" />
    </device>

    <!--<device xmlns:xi="http://www.w3.org/2001/XInclude" name="imu_recev" type="multipleanalogsensorsclient">
        <param name="period"> 0.010 </param>
        <param name="local">   /imu_client:i </param>
        <param name="remote">  /imu/inertials  </param>

        <action phase="shutdown" level="5" type="detach" />
    </device>-->

    <device xmlns:xi="http://www.w3.org/2001/XInclude" name="imu_sender" type="imu_nws_ros2">  <!--imu_nwc_ros2-->
        <param name="period"> 0.01 </param>
    
        <action phase="startup" level="6" type="attach">
           <paramlist name="networks">
              <elem name="SetOfIMUs"> imu-inertial_wrapper </elem>
           </paramlist>
        </action>
     
        <param name ="node_name"> imu_local </param>
        <param name ="topic_name"> /xense_imu</param>
        <param name ="sensor_name"> xense_imu </param>
     
        <action phase="shutdown" level="5" type="detach" />
    </device>
</devices>